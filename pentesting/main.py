import frida
import sys


# process = frida.get_usb_device().attach('My Enchanted Garden')
def my_message_handler(message, payload):
    print(message)
    print(message["stack"])


code = open("main.js").read()
device = frida.get_usb_device(timeout=1)
#processId = device.spawn('com.bassmd.myenchantedgarden')
#process = device.attach(processId)
process = device.attach('My Enchanted Garden')
script = process.create_script(code)
script.on('message', my_message_handler)
print('[*] Running')
script.load()
#device.resume(processId)


command = ""
while True:
    command = input("Enter command:\n"
                    "0: Exit\n"
                    "1: Set premium\n"
                    "2: Unlock all achievements\n"
                    "3: Steal user credentials\n"
                    "4: Show message\n"
                    "5: Always win chess\n"
                    "6: Hedgehogs on every image\n"
                    "7: Break navigation\n"
                    "choice:\n")
    if command == "0":
        break
    elif command == "1":
        script.exports_sync.setpremium()
    elif command == "2":
        script.exports_sync.unlockalla()
    elif command == "3":
        script.exports_sync.stealcredentials()
    elif command == "4":
        script.exports_sync.showmessage(input("Enter message:\n"))
    elif command == "5":
        script.exports_sync.alwayswin()
    elif command == "6":
        script.exports_sync.hedgehogs()
    elif command == "7":
        script.exports_sync.breaknavigation()
